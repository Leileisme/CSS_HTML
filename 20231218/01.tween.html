<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css' />
  <style>
    body {
      padding-bottom: 500px;
    }

    h3 {
      margin: 20px 0;
    }

    .box1,
    .box2,
    .box3,
    .box4,
    .box5,
    .box6,
    .box7,
    .box8,
    .box9,
    .box10,
    .box11 {
      width: 50px;
      height: 50px;
      background: #000;
      margin: 5px;
    }

    .box2 {
      background: #f00;
    }

    .box3 {
      background: blue;
    }

    .box4 {
      background: green;
    }
  </style>
</head>

<body>
  <div class="container">
    <h2>gsap 全域物件</h2>
    <ul>
      <li>使用 gsap.to()、gsap.from()、gsap.fromTo()、三種建立 tween 補件動畫</li>
      <li>使用 gsap.timeline() 建立時間軸，它是補間動畫或其他時間軸的容器</li>
    </ul>
    <h3>1.選擇目標</h3>
    <div class="box1"></div>
    <hr>
    <h3>2.選擇幾個群組時，使用陣列</h3>
    <div class="box2"></div>
    <div class="box2"></div>
    <div class="box2"></div>
    <div class="box3"></div>
    <div class="box3"></div>
    <div class="box3"></div>
    <div class="box4"></div>
    <div class="box4"></div>
    <div class="box4"></div>
    <div class="box4"></div>

    <hr>
    <h3>3.絕對數值</h3>
    <div class="box5"></div>


    <hr>
    <h3>4.相對數值</h3>
    <div class="box6"></div>


    <hr>
    <h3>5.隨機函式值(字串)</h3>
    <div class="box7"></div>
    <div class="box7"></div>
    <div class="box7"></div>


    <hr>
    <h3>6.函式作為值</h3>
    <div class="box8"></div>
    <div class="box8"></div>
    <div class="box8"></div>

    <hr>
    <h3>7.設定CSS屬性</h3>
    <div class="box9" style="margin: auto;"> </div>
    <p id="word">
      提到眼裡主持轉載到了夥伴是否是他灌水屏東，消息做法許可你在技術完善，遺憾這個獨特中文離開大哥塑膠，見到服裝水溝不管怪物會員一聲由於記住路線所需，明年深深得到不需要審核遭遇，臺灣那裡是因為找不到福建為止日記留下記錄，一切都探索您可以商機做到採購提高女士創建。
    </p>
    <hr>

    <h3>8.設定動畫屬性</h3>
    <div class="box10"></div>
    <button id="play">play</button>
    <button id="pause">pause</button>

    <hr>
    <h3>9.keyframes 關鍵影格</h3>
    <div class="box11"></div>
    <p>讓單一捕間動畫具有更多連續動作</p>
  </div>

  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js'></script>
  <!-- 設定 gasp 主程式 -->
  <script src="./gsap/gsap.js"></script>

  <script>
    // 1.選擇目標----------------------------------
    // gasp.to() 建立一個動畫物件，從目前狀態 到 設定狀態
    // 參數一為目標
    // 參數二為物件，設定物件的屬性，例如 CSS 屬性或是 gsap 動畫屬性
    const b1 = document.querySelector('.box1') // 可以用原生選擇
    const b2 = $('.box1') //也可用JQ
    // tween1 為 gsap 動畫物件
    // gsap 推薦用 css 規範選擇器，例如 .box1
    const tween1 = gsap.to('.box1', {
      x: 500,
      duration: 3
    })


    // 2.選擇幾個群組時使用陣列----------------------------------
    const dom1 = document.querySelectorAll('.box2')
    const dom2 = document.querySelectorAll('.box3')
    const dom3 = document.querySelectorAll('.box4')

    const jq1 = $('.box2')
    const jq2 = $('.box3')
    const jq3 = $('.box4')

    // const tween2 = gsap.to(['.box2', '.box3', '.box4'], {
    //   x: 500,
    //   duration: 5
    // })

    const tween2 = gsap.to('.box2,.box3,.box4', {
      x: 500,
      duration: 5
    })

    // 3.絕對數值----------------------------------
    const tween3 = gsap.to('.box5', {
      // x: 500, //絕對數值，使用無單位
      // x: '500px', //絕對數值，有單位
      // x: '100%',
      xPercent: 100, //100相當於 => translateX(100%)
      duration: 5
    })

    // 4.相對數值----------------------------------

    let myVar = 300
    const tween4 = gsap.to('.box6', {
      x: '+=200', //相對數值，使用+=或-=
      x: `+=${myVar}`,
      duration: 1,
      repeat: 3, //初始+3
      repeatRefresh: true, //到達為值後繼續往下
    })





    // 5.隨機函式值(字串)----------------------------------

    const tween5 = gsap.to('.box7', {
      x: 'random(0,1000)', // 0-1000隨機
      x: 'random(500,1000,500)', // 500-1000隨機，且每次都是500的倍數
      background: 'random([red,green,blue])', //從陣列中選擇一個
      border: '7px random([solid,dashed,double]) rgb(random(0,255),random(0,255),random(0,255))',
      duration: 3
    })


    // 6.函式作為值----------------------------------

    const tween6 = gsap.to('.box8', {
      x: function (index, target, targets) {
        console.log(index, target, targets)
        // index 索引值
        // target 目標
        // targets 目標陣列
        return 100 * (index + 1)
      },
      duration: 3,
    })


    // 7.設定 CSS　屬性----------------------------------
    const tween７ = gsap.to('.box9', {
      x: '+=random(-50,50)',
      y: '+=random(-50,50)',
      rotation: 720,
      scale: 1.5,
      skewX: 10,
      skewY: 10,
      width: 100,
      height: 100,
      border: '2px solid red',
      boxShadow: '0 0 10px rgba(255,0,0,0.1)',
      backgroundColor: 'transparent',
      backdropFilter: 'blur(5px)',
      // 設定動畫控制
      repeat: 5,
      repeatRefresh: true,
      duration: 2
    })

    // 設定 CSS 文字屬性
    // 實例化物件 new Date()
    const word = gsap.to('#word', {
      color: 'random([red,green.blue])',
      fontWeight: 'bold',
      fontSize: '1.5rem',
      repeat: 5,
      repeatRefresh: true,
      duration: 2
    })

    // 8.設定動畫屬性 ----------------------------------
    const tween8 = gsap.to('.box10', {
      x: 1000,
      duration: 2,
      // delay: 3, // 初始播放時間延遲
      yoyo: true, // 重複來回播放
      repeat: 3, // 重複次數，-1為無限循環
      // repeatDelay: 5, // 重複播放延遲時間
      ease: "slow(0.7,0.7,false)",
      y: -500,
      yoyoEase: 'back', //跑過頭再往回拉
    })

    $('#play').on('click', function () {
      tween8.play()
    })

    $('#pause').on('click', function () {
      tween8.pause()
    })

    // 9.keyframes 關鍵影格 ----------------------------------
    gsap.to('.box11', {
      // 很多個所以用陣列
      repeat: -1,
      //  關鍵影格重複的程式碼可以提取到 defaults 中
      defaults: {
        duration: 1,
        delay: 1,
        ease: 'elastic',
      },
      keyframes: [
        // A
        {
          x: 200,
          rotation: 360,
        },
        // B
        {
          y: 100,
          scale: 0.1,
          duration: 3, //可以覆蓋 defaults 值
          ease: 'steps(3)', //可以覆蓋 defaults 值
        },
        // C
        {
          x: 0,
          rotation: -350,
          scale: 1.5,
        },
        // D
        {
          y: 0,
          scale: 1,
        }
      ]
    })

  </script>
</body>

</html>